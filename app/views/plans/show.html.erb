

<h1><%= @plan.name %></h1>

<%if user_signed_in? && @plan.user.id != current_user.id%>
  <p class= "btn btn-primary">Clone Plan</p>
<%end %>


<%# GOALS - if user signed in AND owns plan they can add a new goal%>

  <h2>Goals</h2>
    <% @goals.each do |goal| %>
      <p><%= goal.content %></p>
    <% end %>
  <% if user_signed_in? %>
    <% if @plan.user.id == current_user.id %>
      <%= link_to 'New Goal', new_plan_goal_path(@plan),  class: "btn btn-primary" %>
    <% end %>
  <%end%>


<%# TASKS - if user signed in AND owns plan they can add/edit/delete a new task%>


<h2>Planner</h2>
  <ul>
    <% @tasks.each do |task| %>
      <li><%= task.due_date %></li>
      <li><%= task.action %></li>
    <% end %>
  </ul>
  <% if user_signed_in? %>
    <% if @plan.user.id == current_user.id %>
      <%= link_to 'New Task', new_plan_task_path(@plan),  class: "btn btn-primary" %>
    <%end%>

  <%end%>


<%# DIARY ENTRIES - if user signed in AND owns plan they can add/edit/delete a diary entry%>

<h2>Learning Journal</h2>
  <ul>
    <% @diary_entries.each do |entry| %>
      <li><%= link_to entry.title, plan_diary_entry_path(@plan.id , entry.id) %></li>
    <% end %>
  </ul>
  <% if user_signed_in? %>
    <% if @plan.user.id == current_user.id %>
      <%= link_to 'New Entry', new_plan_diary_entry_path(@plan),  class: "btn btn-primary" %>
    <%end%>

  <%end%>



<h2 class="resource-heading">Resources</h2>
<div class="resources">
  <div class="plans">
    <div class="row">
      <% @resource_info.each do |resource| %>
        <div class="col-sm-4">
          <div class="m-3 p-3">
            <div class="card" style="width: 18rem;">
              <div class= "card_header">
                <h5 class="card-title"><%= resource[:title] %></h5>
              </div>
              <div class="card-body">
                <p class="card-text"><%= resource[:description] %></p>
              </div>
              <div class="plan-image">
                <a href=<%= resource[:url] %> class="card-link" target="_blank">
                  <img class="img-fluid" src=<%= resource[:image] %>>
                </a>
              </div>
              <div class="card-footer">
                <div class="card-footer-flex">
                </div>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>






<%= link_to "Back", :back, class: "btn btn-primary" %>

<%# if user owns a plan they can delete, edit plan, add/edit/delete goals, add/edit/delete resource, add/edit/delete task %>
<% if user_signed_in? %>
  <% if @plan.user.id == current_user.id %>
    <%= link_to 'Destroy', plan_path(@plan), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-primary" %>
    <%= link_to 'Add a New Resource!', new_plan_resource_path(@plan),  class: "btn btn-primary" %>

  <% end %>
<% end %>
